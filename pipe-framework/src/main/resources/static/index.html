<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>RAAS | Test Harness</title>
    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="css/font-awesome.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">
</head>

<style>
.section-light
{
	     background: none; 
}

a:hover
{
	 text-decoration: none;
}

a
{
	color: #367e9c;
    text-decoration: none;
    cursor: pointer;
    outline: 0;
	margin-bottom: 2px;
    display: inline-block;
    font-family: BentonSans-Book, Arial, Helvetica, sans-serif;
    font-size: 13px;
}



.list-feature span
{
	font-size:100%;
}


.fa-6
{
	font-size:17px;
}


.navbar
{
	width:100%;
	color: #FFFFFF;
    line-height: 4rem;
    font-size: 1.6rem;
    background-color: #464646;
	    
}


.navbar a {
    color: white !important;
    font-size: 20px;
    letter-spacing: -0.5px;
    padding-bottom: 24px !important;
    padding-top: 20px !important;
}

img:hover
{
	cursor:pointer;
}


.btn-primary {
   border:none;
}

.btn-primary:hover {
   border:none;
}
</style>

<body>

<div class="navbar navbar-inverse navbar-fixed" role="navigation">
    <div class="container" style="width:100%">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">Search Engine</a>
        </div>
        <div class="collapse navbar-collapse">

	<div style="float:right;margin-top:8px">
	<form class="form-inline my-2 my-lg-0">
      <input class="form-control mr-sm-2" type="text" placeholder="Application Search">
      <button type="button" class="btn btn-primary">Search</button>
    </form>
	</div>
        </div><!--/.nav-collapse -->
		
    </div>
	
	
</div>


<section class="section-light">
    <div class="col-md-12">
		<div class="col-md-5" style="margin-left:25%">
			<input class="form-control" placeholder="Search" name="srch-term" id="srch-term" type="text" style="width:80%;display:inline-block">
			<button type="button" id="search" class="btn btn-primary" style="margin-top:-7px;margin-left:5px">Search</button>
		</div>
	</div>
	
	<div id="contentLoad" class="col-md-11" style="margin-top: 5%;overflow-y:auto;margin-left:5%">
	</div>
	<div class="modal fade" id="modalpopup">
  <div class="modal-dialog"  role="document" style="width:90%;overflow:auto">
    <div class="modal-content" style="width:90%;">
      <div class="modal-header">
        <h5 class="modal-title" id="pouptitle"></h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <img src="" id="poupimg" style="height:700px;margin-left:7%"></img>
      </div>
      <div class="modal-footer">
        
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
</section>




<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="js/jquery.js"></script>
<script src="js/bootstrap.js"></script>

<script>
$( "#search" ).click(function() {
   $.get("http://10.126.219.141:8083/docs?query="+$("#srch-term").val(), function(data, status){
        
		if(status == "success")
		{
			var obj =data;
			drawContnet(obj);
		}else
		{
			alert("rest failed")
		}
    });
	
	
	
	
});


function drawContnet(obj)
{
	$('#modalpopup').modal({ show: false})
	
	
	var content = obj["content"];
	window.content = content;
	if(content.length>0)
	{
		$("#contentLoad").html("");
		var row = '<div id = "row0" class="row"></div>';
		$("#contentLoad").html(row);
		var rowid = "row0"
		var thumbmail = "";
		for(var i=0;i<content.length;i++)
		{
			if(i!=0 && i%3 == 0)
			{
				row = '<div id = "row"'+i+' class="row"></div>'
				rowid = "row"+i;
				$("#contentLoad").html(row);
			}
			
			thumbmail = '<div class="col-md-3" style="padding:20px"><div style="text-align:center;border: 2px solid #e2e0e9;height: 240px;width: 273px">'
			thumbmail+=	 '<img src='+content[i]["thumbnailUrl"]+' objid='+i
			+' onclick="showpopup(this)" data-target="#modalpopup" style="box-shadow: 5px 6px 8px #888888;margin-top:10px;height:150px;width:219px;border: 2px solid #e0dada;"></img><br>'
			thumbmail+=  '<div style="margin-top:10px;margin-top: 10px;font-size: 15px;color: #795548;font-weight: bold;">User Id : '+content[i]["userId"]+'<br>Tags : '+content[i]["tags"]+'</div></div></div>'
			$("#"+rowid).html($("#"+rowid).html()+thumbmail);
			
			
		}
	}else
	{
		$("#contentLoad").html('<div class="alert alert-info"><strong>Info!</strong> No Data Available</div>')
	}
}
function showpopup(obj)
{
	console.log(obj);
	var index = obj.attributes["objid"].value;
	var selectedobj = window.content[index]
	$("#poupimg").attr("src",selectedobj["url"]);
	$("#pouptitle").html(selectedobj["userId"]);
	
$('#modalpopup').modal('show')
	
	
	
}
</script>
</body>
</html>
